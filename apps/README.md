## Semantic Search

```bash
pip install -r apps/requirements.txt
export SOLR_URL=http://localhost:8983/solr
export SOLR_CORE=trustees
export VECTOR_FIELD=vector
export MODEL_NAME=sentence-transformers/all-MiniLM-L6-v2

streamlit run apps/semantic_ui.py
```

## Annotator

```bash
export SOLR_URL=http://localhost:8983/solr
export SOLR_CORE=trustees
export VECTOR_FIELD=vector
export MODEL_NAME=sentence-transformers/all-MiniLM-L6-v2
export PDF_DIR=data/pdfs
export OCR_OUTPUT_DIR=data/ocr_output      # ocr_output/<engine>/<doc_id>.json
export THUMB_DIR=.thumb_cache

streamlit run apps/annotator.py
```


## Debugging

dummy vector

```bash
curl -sS -X POST 'http://localhost:8983/solr/trustees/select' --data-urlencode = 'q={!knn f=vector topK=3}[0.008973435498774052,-0.014134638011455536,0.028930427506566048,0.03215030953288078,-0.03823958337306976,-0.059476565569639206,-0.007014361210167408,-0.024194521829485893,0.0016068093245849013,0.03763141110539436,0.15664006769657135,0.044636454433202744,-0.0150226429104805,0.06775882095098495,0.012634300626814365,0.013521733693778515,-0.03379927948117256,-0.008659089915454388,0.029607737436890602,0.03882937878370285,0.04637306183576584,-0.03403853625059128,-0.03616885468363762,-0.02421727403998375,0.0803951621055603,0.021186871454119682,-0.002887039678171277,0.009490301832556725,0.022733638063073158,-0.04109000787138939,0.025937048718333244,0.011776644736528397,-0.0007107381243258715,-0.045312535017728806,0.10419671982526779,0.03863384202122688,0.05717409774661064,0.016598500311374664,-0.016152221709489822,-0.08119582384824753,-0.10594561696052551,0.07324230670928955,0.08822373300790787,-0.007683211006224155,-0.03906775638461113,-0.03447424992918968,0.011723736301064491,-0.018526189029216766,-0.014077295549213886,0.04281805083155632,0.09383456408977509,-0.0421205498278141,0.022726228460669518,-0.02635170891880989,-0.009394405409693718,0.04448851943016052,0.041525695472955704,0.04210292547941208,-0.06894724071025848,-0.009480130858719349,0.04250645264983177,0.019658666104078293,-0.027267945930361748,-0.010328095406293869,-0.006541412323713303,-0.024016357958316803,0.05691170319914818,-0.03706157207489014,0.07834184169769287,0.03434234857559204,0.06925998628139496,-0.04620055481791496,0.03074224665760994,-0.04890517517924309,0.015351501293480396,0.10795916616916656,-0.02277049981057644,0.08100248128175735,-0.029650913551449776,0.01927885413169861,0.0909448117017746,-0.003943345975130796,0.026450639590620995,-0.054621413350105286,-0.03706315532326698,-0.04008198529481888,-0.05794447660446167,-0.04313494265079498,0.02180132083594799,0.04400264471769333,0.0719372034072876,-0.020741989836096764,-0.06790824234485626,-0.03028927370905876,0.03878653794527054,-0.06716285645961761,-0.1284889131784439,0.02064286358654499,0.08152814209461212,0.040124040096998215,-0.05632966756820679,0.07714296877384186,0.014154165051877499,0.009585604071617126,-0.027832146733999252,-0.04227886348962784,0.050931237637996674,0.01961982063949108,0.01518738642334938,0.038814254105091095,-0.01453347411006689,-0.08424978703260422,0.02231196127831936,0.004162316210567951,-0.003467313712462783,0.10618698596954346,0.03762187063694,-0.04832763224840164,-0.008718234486877918,0.03265446424484253,0.004790014121681452,0.028854114934802055,-0.01942329667508602,-0.009112072177231312,-0.013706712052226067,-0.059182535856962204,-0.013836282305419445,-2.0206402589169568e-33,0.013131615705788136,-0.013853596523404121,-0.07150516659021378,0.007392308209091425,0.03167888894677162,-0.03601527214050293,0.007489542011171579,0.014593208208680153,-0.015793899074196815,-0.01589219458401203,0.057042282074689865,0.0666622519493103,0.09764686971902847,-0.057904697954654694,0.09729566425085068,-0.05512871965765953,-0.08767899870872498,0.06503837555646896,0.03518709912896156,0.0581296868622303,0.08152132481336594,-0.03853776678442955,0.022443940863013268,-0.09932321310043335,-0.05221828445792198,0.030250223353505135,-0.08197267353534698,0.11116743832826614,0.042436301708221436,-0.020079702138900757,0.05524611473083496,-0.014114473015069962,-0.08571406453847885,-0.04369674623012543,0.05577252432703972,0.03751007840037346,0.03973259776830673,-0.05928879603743553,0.07354167848825455,-0.06914032250642776,0.08253493905067444,0.06812216341495514,0.04134546220302582,0.016566136851906776,0.12109324336051941,0.009596523828804493,0.0470617413520813,-0.031230531632900238,0.09716776013374329,-0.07707375288009644,-0.024879304692149162,-0.05207190662622452,-0.0609486922621727,-0.08657020330429077,0.038499075919389725,0.011246615089476109,-0.031144417822360992,0.05703553557395935,-0.04009758308529854,0.01915755495429039,-0.053230974823236465,0.028549714013934135,-0.0051386235281825066,-0.05200881138443947,0.005729986820369959,-0.11201160401105881,-0.020152384415268898,0.0012005645548924804,0.0747266560792923,-0.10700172185897827,-0.01868976280093193,-0.05263237655162811,0.0018911390798166394,-0.0025974339805543423,0.002067757537588477,0.012722322717308998,-0.05831122025847435,-0.002663220278918743,-0.09098152071237564,0.013597335666418076,0.0009894738905131817,-0.045094508677721024,-0.06091230735182762,0.0951065644621849,0.060088083148002625,0.08108022809028625,0.00014798768097534776,0.011839467100799084,0.06333674490451813,0.0939333513379097,0.0751599669456482,-0.017608322203159332,-0.10501223802566528,0.055170025676488876,0.015026845037937164,-2.545455874888891e-34,0.09613269567489624,0.06611768901348114,-0.048630908131599426,-0.0632520318031311,0.0236238781362772,0.005997058469802141,-0.06619846820831299,0.08517061918973923,-0.05402611941099167,-0.023671921342611313,0.02413269691169262,0.003995361737906933,0.03959042206406593,0.054383017122745514,-0.10496949404478073,0.026865404099225998,0.0386536680161953,-0.05462522432208061,0.007212069816887379,-0.011157967150211334,0.009580413810908794,0.02594039775431156,-0.03941052779555321,-0.05777610465884209,0.020891275256872177,0.007364080287516117,0.046641793102025986,-0.05503305420279503,-0.058755602687597275,0.009753077290952206,-0.0913548469543457,0.023013625293970108,-0.02736307494342327,0.07140883803367615,0.030110841616988182,-0.026145776733756065,0.05651161074638367,-0.017333218827843666,-0.05492543801665306,0.022590145468711853,0.00912392232567072,0.08794683963060379,-0.06005315110087395,0.00308550288900733,0.04206700995564461,0.022228019312024117,-0.03800274431705475,0.055827926844358444,-0.035116489976644516,0.005533527582883835,-0.11459124833345413,0.013063674792647362,0.027493957430124283,-0.12342587858438492,0.09694460034370422,-0.05253550782799721,0.0016837399452924728,0.015503518283367157,-0.12256556004285812,0.060835350304841995,0.09179133176803589,-0.05046427249908447,-0.05477796122431755,-0.030376186594367027,-0.014651728793978691,-0.01138460636138916,0.038521658629179,0.05573948100209236,-0.08254052698612213,-0.02023931033909321,-0.0004746858903672546,-0.00517209991812706,-0.07587366551160812,-0.011462203226983547,-0.011125844903290272,0.010858505964279175,0.09639906138181686,-0.09072908014059067,-0.07541203498840332,-0.09668495506048203,-0.03957877680659294,-0.008707286790013313,-0.08386202901601791,-0.01985059678554535,0.06337597966194153,-0.015747833997011185,-0.006008378230035305,-0.04625455662608147,0.034596722573041916,0.015138547867536545,-0.026549626141786575,-0.03192291036248207,0.05225541070103645,-0.10898822546005249,-0.06966347992420197,-1.8264026735437255e-08,-0.05581536516547203,0.04654634743928909,0.00838937982916832,0.02414202317595482,-0.020704446360468864,-0.027953900396823883,0.0030033509247004986,0.012640153057873249,-0.018373627215623856,0.0434170626103878,-0.03721548616886139,0.05561619997024536,-0.007017083000391722,0.012831752188503742,0.040897347033023834,-0.005340727977454662,0.029597461223602295,-0.02227102220058441,-0.05124332010746002,-0.06360643357038498,-0.11484784632921219,-0.003248564200475812,0.024301942437887192,-0.005043636541813612,-0.016606289893388748,0.06398448348045349,0.04155075550079346,0.003453244920819998,0.013486816547811031,0.010293482802808285,-0.03373763710260391,-0.023608537390828133,0.0113198421895504,-0.040750786662101746,0.017034044489264488,-0.046150483191013336,0.009996085427701473,-0.0007841925253160298,0.020313840359449387,-0.0830371305346489,-0.024868568405508995,-0.0251059178262949,0.008372191339731216,0.060445018112659454,0.021200260147452354,0.12063106149435043,-0.06263601779937744,0.07756620645523071,0.06679549813270569,0.0044501712545752525,-0.021445661783218384,0.0003293016052339226,-0.07355654984712601,-0.06581038981676102,-0.0053644562140107155,0.011291001923382282,-0.007960690185427666,0.027663109824061394,-0.030959080904722214,0.003839213866740465,0.0347251296043396,0.07168365269899368,-0.05013727769255638,-0.04114125296473503]'
```